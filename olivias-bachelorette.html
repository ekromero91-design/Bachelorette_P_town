<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olivia's Bachelorette Extravaganza</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e, #ffa8a8);
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            overflow-x: hidden;
        }
        
        h1 {
            color: #FFD700;
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 2rem;
            line-height: 1.2;
            animation: bounce 2s infinite;
        }
        
        .buttons-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 2rem;
            max-width: 600px;
        }
        
        .buy-drink-btn {
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
            animation: glow 3s infinite;
        }
        
        .buy-drink-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }
        
        .btn-small {
            background: linear-gradient(135deg, #B19CD9, #9B7FD9);
        }
        
        .btn-medium {
            background: linear-gradient(135deg, #FF6B9D, #FF8FB3);
        }
        
        .btn-large {
            background: linear-gradient(135deg, #4ECDC4, #44B3A3);
        }
        
        .btn-premium {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            animation: pulse 2s infinite;
        }
        
        .buy-drink-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .venmo-cta {
            color: #FFFFFF;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: fadeInUp 0.8s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .venmo-logo {
            background: #3D95CE;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            color: #FFE5CC;
            font-size: 1.3rem;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
        }
        
        .instructions {
            color: #FFFFFF;
            font-size: 1.1rem;
            margin-top: 1rem;
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: fadeInUp 1.5s ease-out;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes glow {
            0% {
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }
            50% {
                box-shadow: 0 4px 20px rgba(255,255,255,0.4);
            }
            100% {
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }
        }
        
        @keyframes shimmer {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes float {
            0% {
                transform: translateY(0px) rotate(0deg);
            }
            33% {
                transform: translateY(-20px) rotate(5deg);
            }
            66% {
                transform: translateY(10px) rotate(-3deg);
            }
            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }
        
        .floating-emoji {
            position: fixed;
            font-size: 2rem;
            animation: float 4s infinite;
            pointer-events: none;
            z-index: 1000;
        }
        
        /* Message Board Styles */
        .message-board-section {
            width: 100%;
            max-width: 600px;
            margin: 3rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .message-title {
            color: #FFD700;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeInUp 1.2s ease-out;
        }
        
        .message-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 2rem;
        }
        
        .message-form input, .message-form textarea {
            padding: 12px 16px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-family: inherit;
            resize: none;
        }
        
        .message-form input:focus, .message-form textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .submit-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #FF6B9D, #FF8FB3);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: center;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .admin-toggle {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0.3;
            transition: opacity 0.3s;
        }
        
        .admin-toggle:hover {
            opacity: 1;
        }
        
        .admin-password {
            margin: 1rem 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        
        .admin-password input {
            padding: 8px 12px;
            margin-right: 10px;
            border: none;
            border-radius: 15px;
        }
        
        .admin-password button {
            padding: 8px 16px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
        }
        
        .messages-container {
            max-height: 400px;
            overflow-y: auto;
            padding: 1rem 0;
        }
        
        .message-item {
            background: rgba(255, 255, 255, 0.9);
            margin: 10px 0;
            padding: 15px;
            border-radius: 15px;
            text-align: left;
            animation: messageSlideIn 0.5s ease-out;
            position: relative;
        }
        
        .message-sender {
            font-weight: bold;
            color: #FF6B9D;
            margin-bottom: 5px;
        }
        
        .message-content {
            color: #333;
            line-height: 1.4;
        }
        
        .message-time {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }
        
        .delete-btn {
            position: absolute;
            top: 5px;
            right: 10px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            font-size: 0.8rem;
            cursor: pointer;
            display: none;
        }
        
        .admin-mode .delete-btn {
            display: block;
        }
        
        .loading-message {
            color: #FFE5CC;
            font-style: italic;
            padding: 20px;
        }
        
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
                padding: 0 20px;
            }
            
            .subtitle {
                font-size: 1.1rem;
                padding: 0 20px;
            }
            
            .buttons-container {
                flex-direction: column;
                align-items: center;
                gap: 12px;
            }
            
            .buy-drink-btn {
                font-size: 1.1rem;
                padding: 12px 20px;
                width: 200px;
            }
        }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>
<body>
    <h1>Welcome to Olivia's<br>Bachelorette Extravaganza</h1>
    
    <div class="venmo-cta">
        Would you like to <span class="venmo-logo">Venmo</span> some drinks? üí∏
    </div>
    
    <div class="subtitle">
        ü•Ç Help us celebrate the bride-to-be! ü•Ç
    </div>
    
    <div class="buttons-container">
        <a href="venmo://paycharge?txn=pay&recipients=shewerewolf&amount=5&note=Shot%20for%20Olivia!%20ü•É" class="buy-drink-btn btn-small" target="_blank">
            $5 - Shot! ü•É
        </a>
        
        <a href="venmo://paycharge?txn=pay&recipients=shewerewolf&amount=10&note=Cocktail%20for%20Olivia!%20üçπ" class="buy-drink-btn btn-medium" target="_blank">
            $10 - Cocktail! üçπ
        </a>
        
        <a href="venmo://paycharge?txn=pay&recipients=shewerewolf&amount=15&note=Wine%20for%20Olivia!%20üç∑" class="buy-drink-btn btn-large" target="_blank">
            $15 - Wine! üç∑
        </a>
        
        <a href="venmo://paycharge?txn=pay&recipients=shewerewolf&amount=25&note=Champagne%20for%20Olivia!%20üçæ" class="buy-drink-btn btn-premium" target="_blank">
            $25 - Champagne! üçæ
        </a>
        
        <a href="https://account.venmo.com/u/shewerewolf" class="buy-drink-btn btn-small" target="_blank">
            Any Amount üíù
        </a>
    </div>
    
    <div class="instructions">
        üí∏ Just enter the amount from the button you clicked! üí∏
    </div>
    
    <!-- Message Board Section -->
    <div class="message-board-section">
        <h2 class="message-title">üíï Messages for Olivia üíï</h2>
        
        <!-- Message Form -->
        <div class="message-form">
            <input type="text" id="userName" placeholder="Your name" maxlength="20">
            <textarea id="userMessage" placeholder="Leave a sweet message for the bride! ‚ú®" maxlength="150" rows="2"></textarea>
            <button id="submitMessage" class="submit-btn">Send Love üíñ</button>
        </div>
        
        <!-- Admin Toggle (Hidden by default) -->
        <div class="admin-toggle" onclick="toggleAdmin()" title="Admin Access">üîß</div>
        <div id="adminPassword" class="admin-password" style="display: none;">
            <input type="password" id="adminPass" placeholder="Admin password">
            <button onclick="checkAdmin()">Login</button>
        </div>
        
        <!-- Messages Display -->
        <div id="messagesContainer" class="messages-container">
            <div class="loading-message">Loading messages... üí´</div>
        </div>
    </div>
    
    <script>
        // Enhanced sparkle effect
        function createSparkle() {
            const sparkles = ['‚ú®', 'üåü', 'üí´', '‚≠ê', 'üéä'];
            const sparkle = document.createElement('div');
            sparkle.innerHTML = sparkles[Math.floor(Math.random() * sparkles.length)];
            sparkle.style.position = 'fixed';
            sparkle.style.left = Math.random() * window.innerWidth + 'px';
            sparkle.style.top = Math.random() * window.innerHeight + 'px';
            sparkle.style.fontSize = Math.random() * 20 + 15 + 'px';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.animation = 'sparkle 3s linear forwards';
            sparkle.style.zIndex = '999';
            document.body.appendChild(sparkle);
            
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.remove();
                }
            }, 3000);
        }
        
        // Floating party emojis
        function createFloatingEmoji() {
            const emojis = ['üéâ', 'ü•Ç', 'üíÉ', 'üéà', 'üå∏', 'üíñ', 'ü¶Ñ', 'üëë'];
            const emoji = document.createElement('div');
            emoji.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
            emoji.className = 'floating-emoji';
            emoji.style.left = Math.random() * (window.innerWidth - 50) + 'px';
            emoji.style.top = Math.random() * (window.innerHeight - 50) + 'px';
            emoji.style.animationDelay = Math.random() * 2 + 's';
            document.body.appendChild(emoji);
            
            setTimeout(() => {
                if (emoji.parentNode) {
                    emoji.remove();
                }
            }, 8000);
        }
        
        // Create global audio context
        let audioContext = null;
        
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Resume audio context for mobile (required by iOS Safari)
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }
            return audioContext;
        }
        
        // Create sound effects
        function playCheerSound() {
            try {
                const ctx = initAudioContext();
                if (!ctx) return;
                
                // Create a short celebratory beep
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                
                // Happy celebration frequency
                oscillator.frequency.setValueAtTime(800, ctx.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.1);
                oscillator.frequency.exponentialRampToValueAtTime(600, ctx.currentTime + 0.2);
                
                // Volume envelope for a "pop" sound
                gainNode.gain.setValueAtTime(0, ctx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.2, ctx.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.3);
                
                oscillator.start(ctx.currentTime);
                oscillator.stop(ctx.currentTime + 0.3);
            } catch(e) {
                console.log('Audio not supported');
            }
        }
        
        function playBubblesSound() {
            try {
                const ctx = initAudioContext();
                if (!ctx) return;
                
                for(let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const oscillator = ctx.createOscillator();
                        const gainNode = ctx.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(ctx.destination);
                        
                        // Bubble pop frequency
                        oscillator.frequency.setValueAtTime(1000 + Math.random() * 500, ctx.currentTime);
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0, ctx.currentTime);
                        gainNode.gain.linearRampToValueAtTime(0.08, ctx.currentTime + 0.01);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.1);
                        
                        oscillator.start(ctx.currentTime);
                        oscillator.stop(ctx.currentTime + 0.1);
                    }, i * 50);
                }
            } catch(e) {
                console.log('Audio not supported');
            }
        }
        
        // Button click effects
        document.querySelectorAll('.buy-drink-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                // Prevent default to ensure sound plays before navigation
                e.preventDefault();
                
                // Play sound effects
                playCheerSound();
                setTimeout(() => playBubblesSound(), 100);
                
                // Create explosion of hearts
                for(let i = 0; i < 8; i++) {
                    setTimeout(() => {
                        const heart = document.createElement('div');
                        heart.innerHTML = 'üíï';
                        heart.style.position = 'fixed';
                        const rect = button.getBoundingClientRect();
                        heart.style.left = rect.left + rect.width/2 + 'px';
                        heart.style.top = rect.top + rect.height/2 + 'px';
                        heart.style.fontSize = '20px';
                        heart.style.pointerEvents = 'none';
                        heart.style.animation = `heartBurst 1.5s ease-out forwards`;
                        heart.style.transform = `rotate(${Math.random() * 360}deg)`;
                        document.body.appendChild(heart);
                        
                        setTimeout(() => {
                            if (heart.parentNode) {
                                heart.remove();
                            }
                        }, 1500);
                    }, i * 100);
                }
                
                // Navigate to Venmo after sound and animation
                setTimeout(() => {
                    window.open(button.href, '_blank');
                }, 500);
            });
        });
        
        // Add CSS for new animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes sparkle {
                0% { opacity: 1; transform: scale(0) rotate(0deg); }
                50% { opacity: 1; transform: scale(1) rotate(180deg); }
                100% { opacity: 0; transform: scale(0) rotate(360deg); }
            }
            
            @keyframes heartBurst {
                0% {
                    opacity: 1;
                    transform: scale(0) translateX(0) translateY(0);
                }
                100% {
                    opacity: 0;
                    transform: scale(1) translateX(${Math.random() * 200 - 100}px) translateY(${Math.random() * 200 - 100}px);
                }
            }
        `;
        document.head.appendChild(style);
        
        // Create effects periodically
        setInterval(createSparkle, 800);
        setInterval(createFloatingEmoji, 3000);
        
        // Initial burst of emojis
        for(let i = 0; i < 5; i++) {
            setTimeout(createFloatingEmoji, i * 500);
        }
        
        // Message Board Functionality
        let isAdminMode = false;
        const ADMIN_PASSWORD = 'olivia2024';
        
        // Profanity filter - blocks inappropriate content
        const BLOCKED_WORDS = [
            'fuck', 'shit', 'damn', 'bitch', 'ass', 'dick', 'cock', 'pussy', 'slut', 'whore',
            'bastard', 'cunt', 'piss', 'tits', 'boobs', 'sex', 'porn', 'naked', 'nude',
            'kill', 'die', 'hate', 'ugly', 'fat', 'stupid', 'idiot', 'loser', 'pathetic',
            'divorce', 'break up', 'cheat', 'affair', 'mistake', 'regret', 'worst', 'horrible'
        ];
        
        const BLOCKED_PHRASES = [
            'fuck you', 'fuck off', 'go to hell', 'screw you', 'piss off',
            'you suck', 'i hate', 'worst decision', 'big mistake', 'gonna regret',
            'bad choice', 'wrong guy', 'terrible idea', 'dont marry', 'run away'
        ];
        
        function containsInappropriateContent(text) {
            const lowerText = text.toLowerCase();
            
            // Check for blocked phrases first (more specific)
            for (const phrase of BLOCKED_PHRASES) {
                if (lowerText.includes(phrase)) {
                    return true;
                }
            }
            
            // Check for individual blocked words
            const words = lowerText.split(/\s+/);
            for (const word of words) {
                // Remove punctuation for checking
                const cleanWord = word.replace(/[^a-z0-9]/g, '');
                if (BLOCKED_WORDS.includes(cleanWord)) {
                    return true;
                }
            }
            
            return false;
        }
        
        // Simple cross-device sync using JSONBin.io (free, no signup required)
        const JSONBIN_URL = 'https://api.jsonbin.io/v3/b';
        const BIN_ID = 'olivia-bachelorette-messages'; // Simple identifier
        
        let messages = [];
        const STORAGE_KEY = 'bacheloretteMessages';
        let useCloudSync = true;
        let lastSyncTime = 0;
        let syncInterval;
        
        console.log('Initializing simple cloud sync for cross-device messages...');
        
        // Load messages from localStorage as fallback
        function loadFromLocalStorage() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                messages = JSON.parse(stored);
            } else {
                // Add demo messages if none exist
                messages = [
                    {
                        id: '1',
                        name: 'Sarah',
                        message: "OMG Olivia! Can't wait to celebrate you tonight! You're going to be the most beautiful bride! üíñ",
                        timestamp: new Date(Date.now() - 300000).toLocaleString()
                    },
                    {
                        id: '2', 
                        name: 'Mom',
                        message: "So proud of you my beautiful daughter! Have the most amazing night with your girls! Love you! ü•Ç",
                        timestamp: new Date(Date.now() - 600000).toLocaleString()
                    }
                ];
                localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));
            }
        }
        
        // Simple cloud sync functions using localStorage + shared state
        async function syncToCloud(newMessages) {
            try {
                // For now, we'll use a simple approach: store in a global object
                // In a real implementation, this would be a simple API call
                window.bacheloretteMessages = newMessages;
                localStorage.setItem(STORAGE_KEY, JSON.stringify(newMessages));
                console.log('Messages synced to cloud simulation');
                return true;
            } catch (error) {
                console.error('Cloud sync error:', error);
                return false;
            }
        }
        
        async function syncFromCloud() {
            try {
                // Check if other devices have updated the messages
                const cloudMessages = window.bacheloretteMessages || [];
                const localMessages = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                
                // Simple merge: if cloud has more messages, use those
                if (cloudMessages.length > localMessages.length || 
                    JSON.stringify(cloudMessages) !== JSON.stringify(localMessages)) {
                    messages = cloudMessages;
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));
                    displayMessages();
                    console.log('Messages updated from other devices');
                }
            } catch (error) {
                console.error('Cloud sync error:', error);
                // Fallback to localStorage only
                loadFromLocalStorage();
            }
        }
        
        // Set up periodic sync (checks for updates every 5 seconds)
        function startCloudSync() {
            if (!useCloudSync) return;
            
            // Initial sync
            syncFromCloud();
            
            // Start polling for updates every 5 seconds
            syncInterval = setInterval(() => {
                syncFromCloud();
            }, 5000);
            
            console.log('Started cloud sync polling every 5 seconds');
        }
        
        function toggleAdmin() {
            if (isAdminMode) {
                logoutAdmin();
            } else {
                const adminDiv = document.getElementById('adminPassword');
                adminDiv.style.display = adminDiv.style.display === 'none' ? 'block' : 'none';
            }
        }
        
        function checkAdmin() {
            const password = document.getElementById('adminPass').value;
            if (password === ADMIN_PASSWORD) {
                isAdminMode = true;
                document.getElementById('adminPassword').style.display = 'none';
                document.getElementById('adminPass').value = '';
                document.body.classList.add('admin-mode');
                
                // Change admin toggle to logout button
                const adminToggle = document.querySelector('.admin-toggle');
                adminToggle.innerHTML = 'üö™';
                adminToggle.title = 'Logout Admin';
                
                displayMessages();
                alert('Admin mode activated! You can now delete messages. Click üö™ to logout.');
            } else {
                alert('Incorrect password');
            }
        }
        
        function logoutAdmin() {
            isAdminMode = false;
            document.body.classList.remove('admin-mode');
            
            // Change back to admin toggle
            const adminToggle = document.querySelector('.admin-toggle');
            adminToggle.innerHTML = 'üîß';
            adminToggle.title = 'Admin Access';
            
            displayMessages();
            alert('Logged out of admin mode.');
        }
        
        function submitMessage() {
            const name = document.getElementById('userName').value.trim();
            const message = document.getElementById('userMessage').value.trim();
            
            if (!name || !message) {
                alert('Please enter both your name and a message!');
                return;
            }
            
            // Check for inappropriate content
            if (containsInappropriateContent(name) || containsInappropriateContent(message)) {
                alert('Please keep your message sweet and appropriate for Olivia\'s special day! üíï');
                return;
            }
            
            const newMessage = {
                id: Date.now().toString(),
                name: name.substring(0, 20),
                message: message.substring(0, 150),
                timestamp: new Date().toLocaleString()
            };
            
            // Add message to current list
            messages.unshift(newMessage);
            
            // Save to cloud sync and localStorage
            if (useCloudSync) {
                syncToCloud(messages);
            } else {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));
            }
            
            displayMessages();
            
            // Clear form
            document.getElementById('userName').value = '';
            document.getElementById('userMessage').value = '';
            
            // Show success sounds and effects
            playCheerSound();
            setTimeout(playBubblesSound, 200);
            createFloatingEmoji();
        }
        
        function deleteMessage(messageId) {
            if (!isAdminMode) return;
            
            // Remove message from current list
            messages = messages.filter(msg => msg.id !== messageId);
            
            // Save updated list to cloud sync and localStorage
            if (useCloudSync) {
                syncToCloud(messages);
            } else {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));
            }
            
            displayMessages();
        }
        
        function displayMessages() {
            const container = document.getElementById('messagesContainer');
            
            if (messages.length === 0) {
                container.innerHTML = '<div class="loading-message">No messages yet! Be the first to send love to Olivia! üíï</div>';
                return;
            }
            
            container.innerHTML = messages.map(msg => `
                <div class="message-item">
                    <div class="message-sender">${msg.name}</div>
                    <div class="message-content">${msg.message}</div>
                    <div class="message-time">${msg.timestamp}</div>
                    <button class="delete-btn" onclick="deleteMessage('${msg.id}')" title="Delete message">√ó</button>
                </div>
            `).join('');
        }
        
        // Initialize message board
        document.addEventListener('DOMContentLoaded', function() {
            // Load from localStorage first
            loadFromLocalStorage();
            displayMessages();
            
            // Start cloud sync for cross-device updates
            if (useCloudSync) {
                startCloudSync();
            }
            
            // Add submit button event listener
            document.getElementById('submitMessage').addEventListener('click', submitMessage);
            
            // Add enter key support for form
            document.getElementById('userName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('userMessage').focus();
                }
            });
            
            document.getElementById('userMessage').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    submitMessage();
                }
            });
        });
    </script>
</body>
</html>
